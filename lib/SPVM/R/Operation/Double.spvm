# Copyright (c) 2024 Yuki Kimoto
# MIT License

class R::Operation::Double extends R::Operation {
  
  use R::NDArray::Double;
  use Fn;
  
  # Class Methods
  static method new : R::Operation::Double () {
    
    my $self = new R::Operation::Double;
    
    return $self;
  }
  
  # Instance Methods
  method c : R::NDArray::Double ($values : double[]) {
    
    unless ($values) {
      die "\"\$values\" must be defined.";
    }
    
    my $length = @$values;
    
    my $ndarray = R::NDArray::Double->new({length => $length});
    
    my $data = $ndarray->data;
    
    my $item_size = $ndarray->item_size;
    
    Fn->memcpy($data, 0, $values, 0, $length * $item_size);
    
    return $ndarray;
  }
  
}
